(window["webpackJsonpreact-noteful"]=window["webpackJsonpreact-noteful"]||[]).push([[0],{25:function(e,t,a){e.exports=a(37)},30:function(e,t,a){},31:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),l=a.n(o),c=a(3),i=(a(30),a(19)),s=a(15),u=a(11),d=(a(31),{API_FOLDERS:"https://my-json-server.typicode.com/asktami/react-router-context-noteful/folders",API_NOTES:"https://my-json-server.typicode.com/asktami/react-router-context-noteful/notes"}),m=r.a.createContext({}),h=function(e){return r.a.createElement("header",null,r.a.createElement("span",null,r.a.createElement("h1",null,r.a.createElement(c.b,{to:"/"},"Noteful"))),r.a.createElement("span",null,"a React app"))},p=function(e){return r.a.createElement("footer",null,"\xa9 2019"," ",r.a.createElement("a",{href:"http://www.asktami.com",target:"_blank",rel:"noopener noreferrer"},"Tami Williams"))},f=a(6),E=a(7),b=a(9),v=a(8),O=a(10),j=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).state={hasError:!1},a}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"Could not display this folder."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),y=function(e){var t=Object(n.useContext)(m).folders;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h2",null,"Folders"),"\xa0\xa0",r.a.createElement(c.c,{to:"/add-folder"},r.a.createElement("button",{className:"btn-add"},"+"))),r.a.createElement("ul",null,t.map(function(t){return r.a.createElement("li",{key:t.id,className:t.id===e.match.params.folderId?" active":null},r.a.createElement(j,null,r.a.createElement(c.c,{to:"/folder/".concat(t.id)},r.a.createElement("span",{role:"img","aria-label":"Folder"},"\ud83d\udcc2"),"\xa0",t.name)))})))},g=function(e){var t=Object(n.useContext)(m),a=t.folders,o=t.notes,l=o?o.find(function(t){return t.id===e.match.params.noteId}):"";if(!l)return"Sorry, no note found.";var c=l.folderId,i=a.filter(function(e){return e.id===c});return r.a.createElement(r.a.Fragment,null,i?i.map(function(t){return r.a.createElement("header",{key:t.id},r.a.createElement("h2",null,t.name,r.a.createElement("br",null),r.a.createElement("button",{className:"btn-save",onClick:e.history.goBack},"Go Back")))}):null)},N=function(e){function t(e){var a;return Object(f.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).state={hasError:!1},a}return Object(O.a)(t,e),Object(E.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"Could not display this note."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component),C=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).handleClickDelete=function(e){e.preventDefault();var t=a.props.note.id;fetch(d.API_NOTES+"/".concat(t),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(e){return e.ok&&"404"!==e.status?e.json():e.json().then(function(t){throw e.status})}).then(function(e){a.context.deleteNote(t),a.props.location.pathname.includes("/note/")&&a.props.history.push("/")}).catch(function(e){404!==e&&a.context.addErrorNotes(e),404===e&&(a.context.deleteNote(t),a.props.location.pathname.includes("/note/")&&a.props.history.push("/"))})},a}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"note-item"},this.context.notesError&&r.a.createElement("p",{className:"error"},this.context.notesError.value),r.a.createElement(c.c,{to:{pathname:"/note/".concat(this.props.note.id),props:this.props}},r.a.createElement("h3",null,this.props.note.name)),r.a.createElement("div",{className:"button-container"},r.a.createElement("span",null,"Modified on"," ",r.a.createElement("span",{className:"note-datemod"},this.props.note.modified?this.props.note.modified.toString().split("T",1)[0]:"")),r.a.createElement("span",null,r.a.createElement("button",{className:"btn-delete",onClick:this.handleClickDelete},"-"))))}}]),t}(r.a.Component);C.contextType=m;var S=function(e){var t=Object(n.useContext)(m).notes,a=e.match.params.folderId?t.filter(function(t){return t.folderId===e.match.params.folderId}):t;return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",null,r.a.createElement("h2",null,"Notes"),"\xa0\xa0",r.a.createElement(c.c,{to:{pathname:"/add-note",state:{folderId:e.match.params.folderId}}},r.a.createElement("button",{className:"btn-add"},"+"))),a.length>0?a.map(function(t){return r.a.createElement("section",{key:t.id},r.a.createElement(N,null,r.a.createElement("div",{className:"note"},r.a.createElement(C,Object.assign({note:t},e)))))}):r.a.createElement("section",{className:"no-border"},r.a.createElement("div",{className:"note"},"No notes in this folder.")))},k=function(e){var t=Object(n.useContext)(m).notes.find(function(t){return t.id===e.match.params.noteId})||{};return r.a.createElement("section",null,r.a.createElement("div",{className:"note"},r.a.createElement(C,Object.assign({},e,{note:t})),r.a.createElement("p",{className:"note-content"},t.content)))},I=a(13);function w(e){return e.message?r.a.createElement("div",{className:"error",id:e.id},e.message):r.a.createElement(r.a.Fragment,null)}function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var F=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={apiError:null,formValid:!1,errorCount:null,name:"",errors:{name:"You must enter a folder name"}},a.updateErrorCount=function(){var e=a.state.errors,t=0;Object.values(e).forEach(function(e){e.length>0&&t++}),a.setState({errorCount:t});var n=0===t;a.setState({formValid:n})},a.validateField=function(e,t){var n="";"name"===e&&(0===t.trim().length?n="Folder name is required":t.trim().length<3&&(n="Folder name must be at least 3 characters long"));var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a.state).errors;r[e]=n,a.setState({errors:r})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(I.a)({},n,r.trim())),a.validateField(n,r),a.updateErrorCount()},a.handleClickCancel=function(){a.props.history.push("/")},a.handleSubmit=function(e){if(e.preventDefault(),!(a.state.errorCount>0)){var t=e.target.name,n={name:t.value};a.setState({apiError:null}),fetch(d.API_FOLDERS,{method:"POST",body:JSON.stringify(n),headers:{"content-type":"application/json"}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){t.value="",a.context.addFolder(e),a.props.history.push("/")}).catch(function(e){a.setState({apiError:e})})}},a}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state.errors;return this.state.apiError?r.a.createElement("p",{className:"error"},this.state.apiError):r.a.createElement("form",{className:"addFolderForm",onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"New Folder"),r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name","aria-label":"Folder Name",required:!0,"aria-required":"true","aria-describedby":"folderNameError","aria-invalid":"true",onChange:this.handleChange}),e.name.length>0&&r.a.createElement(w,{message:e.name,id:"folderNameError"}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn-cancel",onClick:this.handleClickCancel},"Cancel")," ",r.a.createElement("button",{className:"btn-save",disabled:!1===this.state.formValid},"Save Folder")),null!==this.state.errorCount?r.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete  \u2705":"incomplete  \u274c"):null)}}]),t}(r.a.Component);F.contextType=m;var D=F;function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var T=function(e){function t(){var e,a;Object(f.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(b.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={apiError:null,formValid:!1,errorCount:null,folderId:a.props.location.state.folderId||"",name:"",content:"",errors:{folderId:!a.props.location.state.folderId&&"You must select a folder",name:"You must enter a note title",content:"You must enter a description"}},a.updateErrorCount=function(){var e=a.state.errors,t=0;Object.values(e).forEach(function(e){e.length>0&&t++}),a.setState({errorCount:t});var n=0===t;a.setState({formValid:n})},a.validateField=function(e,t){var n="";"name"===e&&(0===t.length?n="Note title is required":t.length<3&&(n="Note title must be at least 3 characters long")),"folderId"===e&&0===t.length&&(n="You must select a folder"),"content"===e&&(0===t.length?n="You must enter a description":t.length<5&&(n="The description must be at least 5 characters long"));var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(a,!0).forEach(function(t){Object(I.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},a.state).errors;r[e]=n,a.setState({errors:r})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(I.a)({},n,r.trim())),a.validateField(n,r.trim()),a.updateErrorCount()},a.handleClickCancel=function(){a.props.history.push("/")},a.handleSubmit=function(e){if(e.preventDefault(),!(a.state.errorCount>0)){var t=e.target,n=t.folderId,r=t.name,o=t.content,l={folderId:n.value,name:r.value,content:o.value,modified:new Date};a.setState({apiError:null}),fetch(d.API_NOTES,{method:"POST",body:JSON.stringify(l),headers:{"content-type":"application/json"}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){n.value="",r.value="",o.value="",a.context.addNote(e),a.props.history.push("/")}).catch(function(e){a.setState({apiError:e})})}},a}return Object(O.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.state.errors,t=this.context.folders;return this.state.apiError?r.a.createElement("p",{className:"error"},this.state.apiError):r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement("fieldset",null,r.a.createElement("legend",null,"New Note"),r.a.createElement("label",{htmlFor:"folderId"},"Folder"),r.a.createElement("select",{id:"folderId",name:"folderId","aria-label":"Folder Id",required:!0,"aria-required":"true","aria-describedby":"folderIdError","aria-invalid":"true",value:this.state.folderId,onChange:this.handleChange},r.a.createElement("option",{value:""},"Select a folder"),t.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})),e.folderId.length>0&&r.a.createElement(w,{id:"folderIdError",message:e.folderId}),r.a.createElement("label",{htmlFor:"name"},"Title"),r.a.createElement("input",{type:"text",id:"name",name:"name",onChange:this.handleChange,"aria-label":"Note Title",required:!0,"aria-required":"true","aria-describedby":"noteTitleError","aria-invalid":"true"}),e.name.length>0&&r.a.createElement(w,{id:"noteTitleError",message:e.name}),r.a.createElement("label",{htmlFor:"content"},"Description"),r.a.createElement("textarea",{id:"content",name:"content",onChange:this.handleChange,"aria-label":"Note Description",required:!0,"aria-required":"true","aria-describedby":"noteDescriptionError","aria-invalid":"true"}),e.content.length>0&&r.a.createElement(w,{id:"noteDescriptionError",message:e.content}),r.a.createElement("br",null),r.a.createElement("button",{className:"btn-cancel",onClick:this.handleClickCancel},"Cancel")," ",r.a.createElement("button",{className:"btn-save",disabled:!1===this.state.formValid},"Save Note")),null!==this.state.errorCount?r.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete  \u2705":"incomplete  \u274c"):null)}}]),t}(r.a.Component);T.contextType=m;var q=[{path:"/",exact:!0,header:h,aside:y,section:S},{path:"/folder/:folderId",exact:!0,header:h,aside:y,section:S},{path:"/note/:noteId",exact:!0,header:h,aside:g,section:k},{path:"/add-folder",exact:!0,header:h,aside:null,section:D},{path:"/add-note",exact:!0,header:h,aside:null,section:T},{path:"/:any/:any/:any",exact:!0,header:h,aside:function(){return null},section:function(){return"Do not edit the  url!"}}],A=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),o=a[0],l=a[1],c=Object(n.useState)([]),f=Object(s.a)(c,2),E=f[0],b=f[1],v=Object(n.useState)(null),O=Object(s.a)(v,2),j=O[0],y=O[1],g=Object(n.useState)(null),N=Object(s.a)(g,2),C=N[0],S=N[1];Object(n.useEffect)(function(){fetch(d.API_FOLDERS,{method:"GET",headers:{"content-type":"application/json"}}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(l).catch(function(e){return y(e)}),fetch(d.API_NOTES,{method:"GET",headers:{"content-type":"application/json"}}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(b).catch(function(e){return S(e)})},[]);var k={notes:E,folders:o,deleteNote:function(e){var t=E.filter(function(t){return t.id!==e});b(t)},addNote:function(e){b([].concat(Object(i.a)(E),[e]))},addFolder:function(e){l([].concat(Object(i.a)(o),[e]))},addErrorNotes:function(e){S(e)},notesError:C};return r.a.createElement(r.a.Fragment,null,r.a.createElement(h,null),r.a.createElement(m.Provider,{value:k},r.a.createElement("main",null,r.a.createElement("div",{className:"aside"},j&&r.a.createElement("p",{className:"error"},j.value),q.map(function(e){var t=e.path,a=e.exact,n=e.aside;return r.a.createElement(u.a,{key:t,path:t,exact:a,component:n})})),r.a.createElement("article",null,C&&r.a.createElement("p",{className:"error"},C.value),q.map(function(e){var t=e.path,a=e.exact,n=e.section;return r.a.createElement(u.a,{key:t,path:t,exact:a,component:n})})))),r.a.createElement(p,null))};l.a.render(r.a.createElement(c.a,{basename:"/react-router-context-noteful"},r.a.createElement(A,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.bf561ed1.chunk.js.map