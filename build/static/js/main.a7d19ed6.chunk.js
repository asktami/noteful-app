(window["webpackJsonpnoteful-react-client"]=window["webpackJsonpnoteful-react-client"]||[]).push([[0],{24:function(e,t,r){e.exports=r(36)},29:function(e,t,r){},30:function(e,t,r){},36:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(21),l=r.n(o),i=r(7),c=(r(29),r(18)),s=r(2),d=r(3),u=r(5),m=r(4),h=r(6),p=r(12),f=(r(30),{DATASOURCE:"postgresql",NOTES_ENDPOINT:"https://cors-anywhere.herokuapp.com/https://asktami-noteful-api.herokuapp.com/api/notes",FOLDERS_ENDPOINT:"https://cors-anywhere.herokuapp.com/https://asktami-noteful-api.herokuapp.com/api/folders",API_KEY:"2934a46e-eec9-11e9-81b4-2a2ae2dbcce4"}),E=n.a.createContext({folders:[],notes:[],deleteNote:function(){},addNote:function(){},addFolder:function(){},addErrorNotes:function(){},addErrorFolders:function(){},notesError:function(){},updateFolders:function(){},updateNotes:function(){},handleClickDeleteFolder:function(){}}),b=function(e){return n.a.createElement("header",null,n.a.createElement("span",null,n.a.createElement("h1",null,n.a.createElement(i.b,{to:"/"},"Noteful"))),n.a.createElement("span",null,"a React app"))},v=function(e){return n.a.createElement("footer",null,"\xa9 2019"," ",n.a.createElement("a",{href:"http://www.asktami.com",target:"_blank",rel:"noopener noreferrer"},"Tami Williams"))},O=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={hasError:!1},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?n.a.createElement("h2",null,"Could not display this folder."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.a.Component),g=function(e){var t,r=Object(a.useContext)(E),o=r.notes,l=r.folders,c=r.handleClickDeleteFolder;return t="postgresql"===f.DATASOURCE?parseInt(e.match.params.id_folder):e.match.params.id_folder,n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement(n.a.Fragment,null,n.a.createElement("h2",null,"Folders"),"\xa0\xa0",n.a.createElement(i.c,{to:"/add-folder"},n.a.createElement("button",{className:"btn-add"},"+")),"\xa0\xa0",void 0!==e.match.params.id_folder?n.a.createElement(n.a.Fragment,null,n.a.createElement(i.c,{to:"/edit-folder/".concat(e.match.params.id_folder)},n.a.createElement("button",{className:"btn-edit"},"\u270e")),"\xa0\xa0",n.a.createElement("button",{className:"btn-delete",onClick:function(){return c(t,e)}},"-")):null)),n.a.createElement("ul",null,l.map(function(e){return n.a.createElement("li",{key:e.id,className:e.id===t?" active":null},n.a.createElement(O,null,n.a.createElement(i.c,{to:"/folders/".concat(e.id)},n.a.createElement("span",{role:"img","aria-label":"Folder"},"\ud83d\udcc2"),"\xa0",e.name,"\xa0(",o.filter(function(t){return t.id_folder===e.id}).length,")")))})))},y=function(e){var t,r=Object(a.useContext)(E),o=r.folders,l=r.notes;t="postgresql"===f.DATASOURCE?parseInt(e.match.params.noteId):e.match.params.noteId;var c=l?l.find(function(e){return e.id===t}):"";if(!c)return"Sorry, no note found.";var s=c.id_folder,d=o.filter(function(e){return e.id===s});return n.a.createElement(n.a.Fragment,null,d?d.map(function(t){return n.a.createElement("header",{key:t.id},n.a.createElement("h2",null,t.name,n.a.createElement("br",null),n.a.createElement(i.c,{to:"/edit-folder/".concat(t.id)},n.a.createElement("button",{className:"btn-edit"},"\u270e")),n.a.createElement("br",null),n.a.createElement("button",{className:"btn-save",onClick:e.history.goBack},"Go Back")))}):null)},j=function(e){function t(e){var r;return Object(s.a)(this,t),(r=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={hasError:!1},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?n.a.createElement("h2",null,"Could not display this note."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.a.Component),N=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).handleClickDelete=function(e){e.preventDefault();var t=r.props.note.id;fetch(f.NOTES_ENDPOINT+"/".concat(t),{method:"DELETE",headers:{"content-type":"application/json",authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){return e.ok&&"404"!==e.status?e.json():e.json().then(function(t){throw e.status})}).then(function(e){r.context.deleteNote(t),r.props.location.pathname.includes("/notes/")&&r.props.history.push("/"),r.props.location.pathname.includes("/folders/")&&r.props.history.push(r.props.location.pathname)}).catch(function(e){404!==e&&r.context.addErrorNotes(e),404===e&&(r.context.deleteNote(t),r.props.location.pathname.includes("/notes/")&&r.props.history.push("/"),r.props.location.pathname.includes("/folders/")&&r.props.history.push(r.props.location.pathname))})},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"note-item"},this.context.notesError&&n.a.createElement("p",{className:"error"},this.context.notesError.value),n.a.createElement(i.c,{to:{pathname:"/notes/".concat(this.props.note.id),props:this.props}},n.a.createElement("h3",null,this.props.note.name)),n.a.createElement("div",{className:"button-container"},n.a.createElement("span",null,"Modified on"," ",n.a.createElement("span",{className:"note-datemod"},this.props.note.modified?this.props.note.modified.toString().split("T",1)[0]:"")),n.a.createElement("span",null,n.a.createElement(i.c,{to:"/edit-note/".concat(this.props.note.id)},n.a.createElement("button",{className:"btn-edit-note"},"\u270e")),"\xa0\xa0\xa0",n.a.createElement("button",{className:"btn-delete-note",onClick:this.handleClickDelete},"-"))))}}]),t}(n.a.Component);N.contextType=E;var C=function(e){var t,r=Object(a.useContext)(E).notes;t="postgresql"===f.DATASOURCE?parseInt(e.match.params.id_folder):e.match.params.id_folder;var o=e.match.params.id_folder?r.filter(function(e){return e.id_folder===t}):r;return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",null,n.a.createElement("h2",null,"Notes"),"\xa0\xa0",n.a.createElement(i.c,{to:{pathname:"/add-note",state:{id_folder:e.match.params.id_folder}}},n.a.createElement("button",{className:"btn-add"},"+"))),o.length>0?o.map(function(t){return n.a.createElement("section",{key:t.id},n.a.createElement(j,null,n.a.createElement("div",{className:"note"},n.a.createElement(N,Object.assign({note:t},e)))))}):n.a.createElement("section",{className:"no-border"},n.a.createElement("div",{className:"note"},"No notes in this folder.")))},S=function(e){var t,r=Object(a.useContext)(E).notes;t="postgresql"===f.DATASOURCE?parseInt(e.match.params.noteId):e.match.params.noteId;var o=r.find(function(e){return e.id===t})||{};return n.a.createElement("section",null,n.a.createElement("div",{className:"note"},n.a.createElement(N,Object.assign({},e,{note:o})),n.a.createElement("p",{className:"note-content"},o.content)))},F=r(9);function _(e){return e.message?n.a.createElement("div",{className:"error",id:e.id},e.message):n.a.createElement(n.a.Fragment,null)}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var k=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={apiError:null,formValid:!1,errorCount:null,name:"",errors:{name:"You must enter a folder name"}},r.updateErrorCount=function(){var e=r.state.errors,t=0;Object.values(e).forEach(function(e){e.length>0&&t++}),r.setState({errorCount:t});var a=0===t;r.setState({formValid:a})},r.validateField=function(e,t){var a="";"name"===e&&(0===t.trim().length?a="Folder name is required":t.trim().length<3&&(a="Folder name must be at least 3 characters long"));var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(r,!0).forEach(function(t){Object(F.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r.state).errors;n[e]=a,r.setState({errors:n})},r.handleChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(F.a)({},a,n.trim())),r.validateField(a,n),r.updateErrorCount()},r.handleClickCancel=function(){r.props.history.push("/")},r.handleSubmit=function(e){if(e.preventDefault(),!(r.state.errorCount>0)){var t=e.target.name,a={name:t.value};r.setState({apiError:null}),fetch(f.FOLDERS_ENDPOINT,{method:"POST",body:JSON.stringify(a),headers:{"content-type":"application/json",Authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){t.value="",r.context.addFolder(e),r.props.history.push("/folders/".concat(e.id))}).catch(function(e){r.setState({apiError:e})})}},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.errors;return this.state.apiError?n.a.createElement("p",{className:"error"},this.state.apiError):n.a.createElement("form",{className:"addFolderForm",onSubmit:this.handleSubmit,noValidate:!0},n.a.createElement("fieldset",null,n.a.createElement("legend",null,"New Folder"),n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{type:"text",id:"name",name:"name","aria-label":"Folder Name",required:!0,"aria-required":"true","aria-describedby":"folderNameError","aria-invalid":"true",onChange:this.handleChange}),e.name.length>0&&n.a.createElement(_,{message:e.name,id:"folderNameError"}),n.a.createElement("br",null),n.a.createElement("button",{className:"btn-cancel",onClick:this.handleClickCancel},"Cancel")," ",n.a.createElement("button",{className:"btn-save",disabled:!1===this.state.formValid},"Save Folder")),null!==this.state.errorCount?n.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete  \u2705":"incomplete  \u274c"):null)}}]),t}(n.a.Component);k.contextType=E;var P=k;function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var T=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={apiError:null,formValid:!1,errorCount:null,id_folder:r.props.location.state.id_folder||"",name:"",content:"",errors:{id_folder:!r.props.location.state.id_folder&&"You must select a folder",name:"You must enter a note title",content:"You must enter a description"}},r.updateErrorCount=function(){var e=r.state.errors,t=0;Object.values(e).forEach(function(e){e.length>0&&t++}),r.setState({errorCount:t});var a=0===t;r.setState({formValid:a})},r.validateField=function(e,t){var a="";"name"===e&&(0===t.length?a="Note title is required":t.length<3&&(a="Note title must be at least 3 characters long")),"id_folder"===e&&0===t.length&&(a="You must select a folder"),"content"===e&&(0===t.length?a="You must enter a description":t.length<5&&(a="The description must be at least 5 characters long"));var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(r,!0).forEach(function(t){Object(F.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r.state).errors;n[e]=a,r.setState({errors:n})},r.handleChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(F.a)({},a,n.trim())),r.validateField(a,n.trim()),r.updateErrorCount()},r.handleClickCancel=function(){r.props.history.push("/")},r.handleSubmit=function(e){if(e.preventDefault(),!(r.state.errorCount>0)){var t=e.target,a=t.id_folder,n=t.name,o=t.content,l={id_folder:a.value,name:n.value,content:o.value,modified:new Date};r.setState({apiError:null}),fetch(f.NOTES_ENDPOINT,{method:"POST",body:JSON.stringify(l),headers:{"content-type":"application/json",Authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(e){a.value="",n.value="",o.value="",r.context.addNote(e),r.props.history.push("/folders/".concat(a.value))}).catch(function(e){r.setState({apiError:e})})}},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.state.errors,t=this.context.folders;return this.state.apiError?n.a.createElement("p",{className:"error"},this.state.apiError):n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("fieldset",null,n.a.createElement("legend",null,"New Note"),n.a.createElement("label",{htmlFor:"id_folder"},"Folder"),n.a.createElement("select",{id:"id_folder",name:"id_folder","aria-label":"Folder Id",required:!0,"aria-required":"true","aria-describedby":"id_folderError","aria-invalid":"true",value:this.state.id_folder,onChange:this.handleChange},n.a.createElement("option",{value:""},"Select a folder"),t.map(function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.name)})),e.id_folder.length>0&&n.a.createElement(_,{id:"id_folderError",message:e.id_folder}),n.a.createElement("label",{htmlFor:"name"},"Title"),n.a.createElement("input",{type:"text",id:"name",name:"name",onChange:this.handleChange,"aria-label":"Note Title",required:!0,"aria-required":"true","aria-describedby":"noteTitleError","aria-invalid":"true"}),e.name.length>0&&n.a.createElement(_,{id:"noteTitleError",message:e.name}),n.a.createElement("label",{htmlFor:"content"},"Description"),n.a.createElement("textarea",{id:"content",name:"content",onChange:this.handleChange,"aria-label":"Note Description",required:!0,"aria-required":"true","aria-describedby":"noteDescriptionError","aria-invalid":"true"}),e.content.length>0&&n.a.createElement(_,{id:"noteDescriptionError",message:e.content}),n.a.createElement("br",null),n.a.createElement("button",{className:"btn-cancel",onClick:this.handleClickCancel},"Cancel")," ",n.a.createElement("button",{className:"btn-save",disabled:!1===this.state.formValid},"Save Note")),null!==this.state.errorCount?n.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete  \u2705":"incomplete  \u274c"):null)}}]),t}(n.a.Component);T.contextType=E;var x=T;function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var A=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={apiError:null,formValid:!0,errorCount:null,id:r.props.match.params.id_folder,name:"",errors:{name:""}},r.updateErrorCount=function(){var e=r.state.errors,t=0;Object.values(e).forEach(function(e){e.length>0&&t++}),r.setState({errorCount:t});var a=0===t;r.setState({formValid:a})},r.validateField=function(e,t){var a="";"name"===e&&(0===t.trim().length?a="Folder name is required":t.trim().length<3&&(a="Folder name must be at least 3 characters long"));var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(r,!0).forEach(function(t){Object(F.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r.state).errors;n[e]=a,r.setState({errors:n})},r.handleChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(F.a)({},a,n.trim())),r.validateField(a,n),r.updateErrorCount()},r.handleClickCancel=function(){r.props.history.push("/")},r.resetFields=function(e){r.setState({id:e.id||"",name:e.name||""})},r.handleSubmit=function(e){if(e.preventDefault(),!(r.state.errorCount>0)){var t=r.props.match.params.id_folder,a=r.state,n={id:a.id,name:a.name};r.setState({apiError:null}),fetch(f.FOLDERS_ENDPOINT+"/".concat(t),{method:"PATCH",body:JSON.stringify(n),headers:{"content-type":"application/json",authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){r.resetFields(n),r.context.updateFolders(n),r.props.history.push("/")}).catch(function(e){r.setState({apiError:e})})}},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id_folder;fetch(f.FOLDERS_ENDPOINT+"/".concat(t),{method:"GET",headers:{"content-type":"application/json",authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(t){e.setState({id:t.id,name:t.name})}).catch(function(t){e.setState({apiError:t})})}},{key:"render",value:function(){var e=this,t=this.state.errors;return this.state.apiError?n.a.createElement("p",{className:"error"},this.state.apiError):n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{className:"editFolderForm",onSubmit:this.handleSubmit,noValidate:!0},n.a.createElement("fieldset",null,n.a.createElement("legend",null,"Edit Folder"),n.a.createElement("label",{htmlFor:"name"},"Name"),n.a.createElement("input",{type:"text",id:"name",name:"name","aria-label":"Folder Name",required:!0,"aria-required":"true","aria-describedby":"folderNameError","aria-invalid":"true",value:this.state.name,onChange:this.handleChange}),t.name.length>0&&n.a.createElement(_,{message:t.name,id:"folderNameError"}),n.a.createElement("br",null),n.a.createElement("button",{className:"btn-cancel",onClick:this.handleClickCancel},"Cancel")," ",n.a.createElement("button",{className:"btn-save",disabled:!1===this.state.formValid},"Save Folder")," ")),this.state.formValid?n.a.createElement("button",{className:"btn-delete-folder btn-position",disabled:!1===this.state.formValid,onClick:function(){return e.context.handleClickDeleteFolder(e.state.id,e.props)}},"Delete"):null,null!==this.state.errorCount?n.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete  \u2705":"incomplete  \u274c"):null)}}]),t}(n.a.Component);A.contextType=E;var q=A;function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var Y=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={apiError:null,formValid:!0,errorCount:null,id:"",id_folder:"",name:"",content:"",errors:{id_folder:"",name:"",content:""}},r.updateErrorCount=function(){var e=r.state.errors,t=0;Object.values(e).forEach(function(e){e.length>0&&t++}),r.setState({errorCount:t});var a=0===t;r.setState({formValid:a})},r.validateField=function(e,t){var a="";"name"===e&&(0===t.length?a="Note title is required":t.length<3&&(a="Note title must be at least 3 characters long")),"id_folder"===e&&0===t.length&&(a="You must select a folder"),"content"===e&&(0===t.length?a="You must enter a description":t.length<5&&(a="The description must be at least 5 characters long"));var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(r,!0).forEach(function(t){Object(F.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r.state).errors;n[e]=a,r.setState({errors:n})},r.handleChange=function(e){var t=e.target,a=t.name,n=t.value;r.setState(Object(F.a)({},a,n)),r.validateField(a,n),r.updateErrorCount()},r.handleClickCancel=function(){r.props.history.push("/")},r.resetFields=function(e){r.setState({id:e.id||"",name:e.name||"",content:e.content||"",id_folder:e.id_folder||""})},r.handleSubmit=function(e){if(e.preventDefault(),!(r.state.errorCount>0)){var t=r.props.match.params.noteId,a={id:"postgresql"===f.DATASOURCE?parseInt(r.state.id):r.state.id,id_folder:"postgresql"===f.DATASOURCE?parseInt(r.state.id_folder):r.state.id_folder,name:r.state.name,content:r.state.content,modified:new Date};r.setState({apiError:null}),fetch(f.NOTES_ENDPOINT+"/".concat(t),{method:"PATCH",body:JSON.stringify(a),headers:{"content-type":"application/json",authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){if(!e.ok)return e.json().then(function(e){return Promise.reject(e)})}).then(function(){r.resetFields(a),r.context.updateNotes(a),r.props.history.push("/folders/".concat(r.state.id_folder))}).catch(function(e){e(e),r.setState({apiError:e})})}},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.noteId;fetch(f.NOTES_ENDPOINT+"/".concat(t),{method:"GET",headers:{"content-type":"application/json",authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(t){e.setState({id:t.id,name:t.name,id_folder:t.id_folder,content:t.content})}).catch(function(t){e.setState({apiError:t})})}},{key:"render",value:function(){var e=this.state,t=e.errors,r=e.name,a=e.content,o=e.id_folder,l=this.context.folders;return this.state.apiError?n.a.createElement("p",{className:"error"},this.state.apiError):n.a.createElement("form",{onSubmit:this.handleSubmit},n.a.createElement("fieldset",null,n.a.createElement("legend",null,"Edit Note"),n.a.createElement("label",{htmlFor:"id_folder"},"Folder"),n.a.createElement("select",{id:"id_folder",name:"id_folder","aria-label":"Folder Id",required:!0,"aria-required":"true","aria-describedby":"id_folderError","aria-invalid":"true",value:o,onChange:this.handleChange},n.a.createElement("option",{value:""},"Select a folder"),l.map(function(e){return n.a.createElement("option",{key:e.id,value:e.id},e.name)})),t.id_folder.length>0&&n.a.createElement(_,{id:"id_folderError",message:t.id_folder}),n.a.createElement("label",{htmlFor:"name"},"Title"),n.a.createElement("input",{type:"text",id:"name",name:"name",value:r,onChange:this.handleChange,"aria-label":"Note Title",required:!0,"aria-required":"true","aria-describedby":"noteTitleError","aria-invalid":"true"}),t.name.length>0&&n.a.createElement(_,{id:"noteTitleError",message:t.name}),n.a.createElement("label",{htmlFor:"content"},"Description"),n.a.createElement("textarea",{id:"content",name:"content",value:a,onChange:this.handleChange,"aria-label":"Note Description",required:!0,"aria-required":"true","aria-describedby":"noteDescriptionError","aria-invalid":"true"}),t.content.length>0&&n.a.createElement(_,{id:"noteDescriptionError",message:t.content}),n.a.createElement("br",null),n.a.createElement("button",{className:"btn-cancel",onClick:this.handleClickCancel},"Cancel")," ",n.a.createElement("button",{className:"btn-save",disabled:!1===this.state.formValid},"Save Note")),null!==this.state.errorCount?n.a.createElement("p",{className:"form-status"},"Form is ",this.state.formValid?"complete  \u2705":"incomplete  \u274c"):null)}}]),t}(n.a.Component);Y.contextType=E;var R=[{path:"/",exact:!0,header:b,aside:g,section:C},{path:"/folders/:id_folder",exact:!0,header:b,aside:g,section:C},{path:"/notes/:noteId",exact:!0,header:b,aside:y,section:S},{path:"/add-folder",exact:!0,header:b,aside:null,section:P},{path:"/add-note",exact:!0,header:b,aside:null,section:x},{path:"/edit-note/:noteId",exact:!0,header:b,aside:null,section:Y},{path:"/edit-folder/:id_folder",exact:!0,header:b,aside:null,section:q},{path:"/delete-folder/:id_folder",exact:!0,header:b,aside:g,section:C},{path:"/:any/:any/:any",exact:!0,header:b,aside:function(){return null},section:function(){return"Do not edit the  url!"}}],B=function(e){function t(){var e,r;Object(s.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(n)))).state={folders:[],notes:[],foldersError:null,notesError:null,deleteFolderId:null},r.deleteNote=function(e){var t=r.state.notes.filter(function(t){return t.id!==e});r.setState({notes:t})},r.deleteFolder=function(e){var t=r.state.folders.filter(function(t){return t.id!==e});r.setState({folders:t}),r.getNotes()},r.addNote=function(e){r.setState({notes:[].concat(Object(c.a)(r.state.notes),[e])})},r.addFolder=function(e){r.setState({folders:[].concat(Object(c.a)(r.state.folders),[e])})},r.addErrorNotes=function(e){r.setState({notesError:e})},r.addErrorFolders=function(e){r.setState({foldersError:e})},r.setFolders=function(e){r.setState({folders:e,error:null})},r.setNotes=function(e){r.setState({notes:e,error:null})},r.getFolders=function(){fetch(f.FOLDERS_ENDPOINT,{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(r.setFolders).catch(function(e){return r.setState({foldersError:e})})},r.getNotes=function(){fetch(f.NOTES_ENDPOINT,{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(r.setNotes).catch(function(e){return r.setState({notesError:e})})},r.updateFolders=function(e){var t=r.state.folders.map(function(t){return t.id!==e.id?t:e});r.setState({folders:t})},r.updateNotes=function(e){var t=r.state.notes.map(function(t){return t.id!==e.id?t:e});r.setState({notes:t})},r.handleClickDeleteFolder=function(e,t){fetch(f.FOLDERS_ENDPOINT+"/".concat(e),{method:"DELETE",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(f.API_KEY)}}).then(function(e){return e.ok&&"404"!==e.status?e.json():e.json().then(function(t){throw e.status})}).then(function(a){r.deleteFolder(e),t.history.push("/")}).catch(function(a){404!==a&&r.addErrorFolders(a),404===a&&(r.deleteFolder(e),t.history.push("/"))})},r}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.getFolders(),this.getNotes()}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.deleteNote,addNote:this.addNote,addFolder:this.addFolder,addErrorNotes:this.addErrorNotes,addErrorFolders:this.addErrorFolders,notesError:this.notesError,updateFolders:this.updateFolders,updateNotes:this.updateNotes,handleClickDeleteFolder:this.handleClickDeleteFolder};return n.a.createElement(n.a.Fragment,null,n.a.createElement(b,null),n.a.createElement(E.Provider,{value:e},n.a.createElement("main",null,n.a.createElement("div",{className:"aside"},this.state.foldersError&&n.a.createElement("p",{className:"error"},this.state.foldersError.value),R.map(function(e){var t=e.path,r=e.exact,a=e.aside;return n.a.createElement(p.a,{key:t,path:t,exact:r,component:a})})),n.a.createElement("article",null,this.state.notesError&&n.a.createElement("p",{className:"error"},this.state.notesError.value),R.map(function(e){var t=e.path,r=e.exact,a=e.section;return n.a.createElement(p.a,{key:t,path:t,exact:r,component:a})})))),n.a.createElement(v,null))}}]),t}(n.a.Component);l.a.render(n.a.createElement(i.a,{basename:""},n.a.createElement(B,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.a7d19ed6.chunk.js.map